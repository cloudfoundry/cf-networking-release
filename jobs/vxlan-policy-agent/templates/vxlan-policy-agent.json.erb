<% if p("netman.disable") %>
<% else %>
<%=
    require 'json'

    toRender = {
      "cni_datastore_path" => p("vxlan-policy-agent.cni_datastore_path"),
      "flannel_subnet_file" => "/var/vcap/data/flannel/subnet.env",
      "iptables_lock_file" => "/var/vcap/data/garden-cni/iptables.lock",

      "policy_server_url" => p("vxlan-policy-agent.policy_server_url"),
      "poll_interval" => p("vxlan-policy-agent.poll_interval"),
      "vni" => 1,

      "metron_address" => p("vxlan-policy-agent.metron_address"),

      "debug_server_host" => p("vxlan-policy-agent.debug_server_host"),
      "debug_server_port" => p("vxlan-policy-agent.debug_server_port"),

      "log_level" => p("vxlan-policy-agent.log_level"),

      # hard-coded values, not exposed as bosh spec properties
      "ca_cert_file" => "/var/vcap/jobs/vxlan-policy-agent/config/certs/ca.crt",
      "client_cert_file" => "/var/vcap/jobs/vxlan-policy-agent/config/certs/client.crt",
      "client_key_file" => "/var/vcap/jobs/vxlan-policy-agent/config/certs/client.key",
    }

    JSON.pretty_generate(toRender)
%>
<% end %>
